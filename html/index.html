<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCGTrade - Intercambio de Cartas Pok√©mon</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/animations.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <button class="hamburger-btn" id="hamburgerBtn">‚ò∞</button>
            <a href="#" class="logo" onclick="goToHome(); return false;">TCGTrade</a>
        </div>
        
        <div class="search-container">
            <input type="text" id="searchInput" class="search-input" placeholder="Buscar cartas...">
            <button class="search-btn" id="searchBtn">üîç</button>
        </div>
        
        <div class="header-right">
            <button class="icon-btn" id="inboxBtn" title="Buz√≥n">üì•</button>
            <button class="icon-btn" id="chatBtn" title="Chat">üí¨</button>
            <button class="icon-btn" id="profileBtn" title="Mi perfil">üë§</button>
            <button class="theme-toggle" id="themeToggle" title="Modo oscuro/claro">üåô</button>
        </div>
    </header>

    <!-- Sidebar -->
    <nav class="sidebar" id="sidebar">
        <ul class="nav-menu">
            <li><a href="#" class="nav-item" onclick="showHomeSection()">üè† Inicio</a></li>
            <li><a href="#" class="nav-item" onclick="showMyCardsSection()">üÉè Mis cartas</a></li>
            <li><a href="#" class="nav-item" onclick="showInterchangesSection()">üîÑ Mis intercambios</a></li>
            <li><a href="#" class="nav-item" onclick="showCollectionSection()">üìö Mi colecci√≥n</a></li>
            <li><a href="#" class="nav-item" onclick="showInboxSection()">üì• Buz√≥n</a></li>
            <li><a href="#" class="nav-item" onclick="showChatSection()">üí¨ Chat</a></li>
            <li><a href="#" class="nav-item" onclick="showHelpSection()">‚ùì Ayuda</a></li>
            <li><a href="#" class="nav-item" onclick="logout()">üö™ Cerrar sesi√≥n</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Home Section -->
        <section id="homeSection" class="content-section active">
            <div class="welcome-container">
                <h1>¬°Bienvenido a TCGTrade!</h1>
                <p>La mejor plataforma para intercambiar cartas Pok√©mon</p>
                <div class="search-prompt">
                    <input type="text" id="homeSearchInput" placeholder="Busca tu carta favorita...">
                    <button onclick="searchFromHome()">Buscar</button>
                </div>
            </div>
        </section>

        <!-- My Cards Section -->
        <section id="myCardsSection" class="content-section">
            <h2>Mis Cartas</h2>
            <div class="cards-grid" id="myCardsGrid">
                <!-- Cartas del usuario -->
            </div>
        </section>

        <!-- Interchanges Section -->
        <section id="interchangesSection" class="content-section">
            <h2>Mis Intercambios</h2>
            <div class="interchanges-container" id="interchangesContainer">
                <!-- Lista de intercambios -->
            </div>
        </section>

        <!-- Collection Section -->
        <section id="collectionSection" class="content-section">
            <h2>Mi Colecci√≥n</h2>
            <div class="collection-stats">
                <div class="stat-card">
                    <h3>Total de cartas</h3>
                    <span id="totalCards">0</span>
                </div>
                <div class="stat-card">
                    <h3>Valor estimado</h3>
                    <span id="estimatedValue">$0</span>
                </div>
            </div>
        </section>

        <!-- Inbox Section -->
        <section id="inboxSection" class="content-section">
            <h2>Buz√≥n</h2>
            <div class="inbox-container" id="inboxContainer">
                <!-- Mensajes del buz√≥n -->
            </div>
        </section>

        <!-- Chat Section -->
        <section id="chatSection" class="content-section">
            <h2>Chat</h2>
            <div class="chat-container" id="chatContainer">
                <!-- Chat interface -->
            </div>
        </section>

        <!-- Help Section -->
        <section id="helpSection" class="content-section">
            <h2>Ayuda</h2>
            <div class="help-content">
                <h3>Preguntas frecuentes</h3>
                <div class="faq-item">
                    <h4>¬øC√≥mo busco cartas?</h4>
                    <p>Usa la barra de b√∫squeda en la parte superior para encontrar cartas por nombre.</p>
                </div>
                <div class="faq-item">
                    <h4>¬øC√≥mo intercambio cartas?</h4>
                    <p>Ve a "Mis cartas" y selecciona las cartas que quieres intercambiar.</p>
                </div>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profileSection" class="content-section">
            <h2>Mi Perfil</h2>
            <div class="profile-tabs">
                <button class="tab-btn active" onclick="showProfileTab('profile')">Perfil</button>
                <button class="tab-btn" onclick="showProfileTab('dashboard')">Dashboard</button>
                <button class="tab-btn" onclick="showProfileTab('collection')">Mi colecci√≥n</button>
                <button class="tab-btn" onclick="showProfileTab('interchanges')">Mis intercambios</button>
                <button class="tab-btn" onclick="showProfileTab('settings')">Configuraci√≥n</button>
                <button class="tab-btn" onclick="showProfileTab('ratings')">Valoraciones</button>
            </div>
            
            <div class="profile-content">
                <div id="profileTab" class="tab-content active">
                    <h3>Datos personales</h3>
                    <form class="profile-form">
                        <input type="text" placeholder="Nombre" id="userName">
                        <input type="email" placeholder="Email" id="userEmail">
                        <button type="submit">Guardar cambios</button>
                    </form>
                </div>
                
                <div id="dashboardTab" class="tab-content">
                    <h3>Dashboard</h3>
                    <div class="dashboard-stats">
                        <div class="stat-item">
                            <span class="stat-number" id="totalCardsCount">0</span>
                            <span class="stat-label">Cartas totales</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="activeTradesCount">0</span>
                            <span class="stat-label">Intercambios activos</span>
                        </div>
                    </div>
                </div>
                
                <div id="collectionTab" class="tab-content">
                    <h3>Mi colecci√≥n</h3>
                    <div class="collection-grid" id="profileCollectionGrid">
                        <!-- Colecci√≥n del usuario -->
                    </div>
                </div>
                
                <div id="interchangesTab" class="tab-content">
                    <h3>Mis intercambios</h3>
                    <div class="interchanges-list" id="profileInterchangesList">
                        <!-- Lista de intercambios -->
                    </div>
                </div>
                
                <div id="settingsTab" class="tab-content">
                    <h3>Configuraci√≥n</h3>
                    <div class="settings-options">
                        <label>
                            <input type="checkbox" id="notificationsEnabled"> Notificaciones
                        </label>
                        <label>
                            <input type="checkbox" id="darkModeEnabled"> Modo oscuro
                        </label>
                    </div>
                </div>
                
                <div id="ratingsTab" class="tab-content">
                    <h3>Valoraciones</h3>
                    <div class="ratings-container" id="ratingsContainer">
                        <!-- Valoraciones del usuario -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Login/Register Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Iniciar Sesi√≥n</h2>
                <button class="close-btn" onclick="hideAuthModal()">√ó</button>
            </div>
            
            <div class="modal-body">
                <!-- Login Form -->
                <form id="loginForm" class="auth-form">
                    <input type="email" id="loginEmail" placeholder="Email" required>
                    <input type="password" id="loginPassword" placeholder="Contrase√±a" required>
                    <button type="submit">Iniciar Sesi√≥n</button>
                </form>
                
                <!-- Register Form -->
                <form id="registerForm" class="auth-form hidden">
                    <input type="text" id="registerName" placeholder="Nombre" required>
                    <input type="email" id="registerEmail" placeholder="Email" required>
                    <input type="password" id="registerPassword" placeholder="Contrase√±a" required>
                    <input type="password" id="registerConfirmPassword" placeholder="Confirmar contrase√±a" required>
                    <button type="submit">Registrarse</button>
                </form>
                
                <!-- Forgot Password Form -->
                <form id="forgotPasswordForm" class="auth-form hidden">
                    <input type="email" id="forgotEmail" placeholder="Email" required>
                    <button type="submit">Enviar enlace de recuperaci√≥n</button>
                </form>
            </div>
            
            <div class="modal-footer">
                <button id="toggleLogin" onclick="toggleAuthMode('login')">Iniciar Sesi√≥n</button>
                <button id="toggleRegister" onclick="toggleAuthMode('register')">Registrarse</button>
                <button id="toggleForgot" onclick="toggleAuthMode('forgot')">¬øOlvidaste tu contrase√±a?</button>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner"></div>
    </div>

    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- JavaScript Files -->
    <script src="/js/main-simple.js"></script>
    <script src="/js/ux-improvements.js"></script>
    <script src="/js/dark-mode.js"></script>
    <script src="/js/modal-fix.js"></script>
</body>
</html>